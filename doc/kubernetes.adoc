= kubernetes

This assumes that `hello` is built.  All commands are run from the `build/` directory


== install

```bash
sudo apt install -y apt-transport-https ca-certificates curl software-properties-common gnupg-agent
```

```
sudo apt  install docker.io
```

=== to run docker without sudo DID NOT WORK!

```
sudo usermod -aG docker <user>
```

== create docker image

```
docker build . --no-cache -t hello-base -f Dockerfile

DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            Install the buildx component to build images with BuildKit:
            https://docs.docker.com/go/buildx/
```


== run image

```
docker run -ti -p 3000:22 <image-id or tag>
```



```
docker run -ti -p 3000:22 hello
```

```
COPY ./hello/hello /app/
WORKDIR /app
```

```
#RUN apt-get clean
#RUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

# Create the SSH directory and set permissions
RUN mkdir /var/run/sshd
RUN chmod 0755 /var/run/sshd


#RUN mkdir /home/ubuntu/.ssh
#RUN chmod 0700 /home/ubuntu/.ssh
#RUN chown ubuntu:ubuntu /home/ubuntu/.ssh

#RUN echo "$PRIVATEKEY" > /home/ubuntu/.ssh/id_ed25519
#RUN echo  "$PUBLICKEY" > /home/ubuntu/.ssh/id_ed25519.pub

# RUN usermod -aG sudo ubuntu
#RUN echo "ubuntu ALL=(ALL) NOPASSWD: ALL" | tee -a /etc/sudoers.d/passwordless_sudo > /dev/null
```
