= kubernetes

This assumes that `hello` is built.  All commands are run from the `build/` directory


== install docker

=== ubuntu & debian

```bash
sudo apt install -y apt-transport-https ca-certificates curl software-properties-common gnupg-agent
```

```
sudo apt  install docker.io
```

=== rocky linux

```
sudo dnf update -y
```

```
sudo dnf install -y yum-utils
```

```
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
```

```
sudo dnf install docker-ce docker-ce-cli containerd.io docker-compose-plugin -y
```

```
sudo systemctl start docker
```

```
sudo systemctl enable docker
```

==== run as non-root user on rocky linux

```
sudo usermod -aG docker $USER
```

```
sudo usermod -aG docker $USER
newgrp docker  # or log out and in again
```

== create docker image


=== rocky linux

NOTE: Failed to build on ancient hardware

```
docker buildx create --use
```

```
sudo docker buildx build --platform=linux/amd64 -t nacho:taco -f Dockerfile .
```


=== ubuntu 24.04


```
docker build . --no-cache -t hello:hello-base -f  -f hello-base.docker

DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            Install the buildx component to build images with BuildKit:
            https://docs.docker.com/go/buildx/
```

```
docker build . --no-cache -t hello:hello -f  -f hello.docker
```


=== macos

unable to test on low resource mac in cloud


== run image

```
sudo docker run -ti -p 3000:22 <image-id or tag>
```

```
sudo docker run -ti -p 3000:22 hello:hello-base
```
